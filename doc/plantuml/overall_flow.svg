<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: overall_flow Pages: 1 -->
<svg width="1243pt" height="168pt"
 viewBox="0.00 0.00 1243.00 168.12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 164.12)">
<title>overall_flow</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-164.12 1239,-164.12 1239,4 -4,4"/>
<!-- client -->
<g id="node1" class="node">
<title>client</title>
<polygon fill="#e6f2ff" stroke="#2b6cb0" points="61,-91 0,-91 0,-87 -4,-87 -4,-83 0,-83 0,-61 -4,-61 -4,-57 0,-57 0,-53 61,-53 61,-91"/>
<polyline fill="none" stroke="#2b6cb0" points="0,-87 4,-87 4,-83 0,-83 "/>
<polyline fill="none" stroke="#2b6cb0" points="0,-61 4,-61 4,-57 0,-57 "/>
<text text-anchor="middle" x="30.5" y="-75.8" font-family="Arial" font-size="14.00">Client</text>
<text text-anchor="middle" x="30.5" y="-60.8" font-family="Arial" font-size="14.00">(HTTP)</text>
</g>
<!-- apiserver -->
<g id="node2" class="node">
<title>apiserver</title>
<polygon fill="#fff3e0" stroke="#2b6cb0" points="180,-91 98,-91 98,-87 94,-87 94,-83 98,-83 98,-61 94,-61 94,-57 98,-57 98,-53 180,-53 180,-91"/>
<polyline fill="none" stroke="#2b6cb0" points="98,-87 102,-87 102,-83 98,-83 "/>
<polyline fill="none" stroke="#2b6cb0" points="98,-61 102,-61 102,-57 98,-57 "/>
<text text-anchor="middle" x="139" y="-75.8" font-family="Arial" font-size="14.00">API Server</text>
<text text-anchor="middle" x="139" y="-60.8" font-family="Arial" font-size="14.00">(Gin)</text>
</g>
<!-- client&#45;&gt;apiserver -->
<g id="edge1" class="edge">
<title>client&#45;&gt;apiserver</title>
<path fill="none" stroke="#2b6cb0" d="M61.17,-72C69.39,-72 78.56,-72 87.62,-72"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="87.75,-75.5 97.75,-72 87.75,-68.5 87.75,-75.5"/>
</g>
<!-- apiserver&#45;&gt;apiserver -->
<g id="edge11" class="edge">
<title>apiserver&#45;&gt;apiserver</title>
<path fill="none" stroke="#2b6cb0" stroke-dasharray="1,5" d="M128.45,-91.04C126.99,-100.53 130.5,-109 139,-109 144.18,-109 147.51,-105.86 148.99,-101.25"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="152.49,-101.22 149.55,-91.04 145.5,-100.83 152.49,-101.22"/>
<text text-anchor="middle" x="139" y="-112" font-family="Arial" font-size="10.00">/admin/ratelimit/write (GET/POST/DELETE)</text>
</g>
<!-- write_limiter -->
<g id="node3" class="node">
<title>write_limiter</title>
<polygon fill="#ffeceb" stroke="#c53030" points="488,-91 374,-91 370,-87 370,-53 484,-53 488,-57 488,-91"/>
<polyline fill="none" stroke="#c53030" points="484,-87 370,-87 "/>
<polyline fill="none" stroke="#c53030" points="484,-87 484,-53 "/>
<polyline fill="none" stroke="#c53030" points="484,-87 488,-91 "/>
<text text-anchor="middle" x="429" y="-75.8" font-family="Arial" font-size="14.00">WriteRateLimiter</text>
<text text-anchor="middle" x="429" y="-60.8" font-family="Arial" font-size="14.00">(local + Redis)</text>
</g>
<!-- apiserver&#45;&gt;write_limiter -->
<g id="edge2" class="edge">
<title>apiserver&#45;&gt;write_limiter</title>
<path fill="none" stroke="#2b6cb0" d="M180.25,-72.78C186.2,-72.87 192.26,-72.95 198,-73 266.44,-73.59 283.56,-73.45 352,-73 354.54,-72.98 357.13,-72.96 359.74,-72.94"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="359.94,-76.44 369.91,-72.84 359.88,-69.44 359.94,-76.44"/>
</g>
<!-- apiserver&#45;&gt;write_limiter -->
<g id="edge10" class="edge">
<title>apiserver&#45;&gt;write_limiter</title>
<path fill="none" stroke="#4a5568" stroke-width="2" d="M180.2,-57.83C186.1,-56.24 192.16,-54.88 198,-54 265.67,-43.74 284.02,-46.06 352,-54 354.53,-54.3 357.11,-54.65 359.7,-55.04"/>
<polygon fill="#4a5568" stroke="#4a5568" stroke-width="2" points="359.29,-58.52 369.74,-56.76 360.47,-51.62 359.29,-58.52"/>
<text text-anchor="middle" x="275" y="-57.8" font-family="Arial" font-size="14.00">reads override key (redis)</text>
</g>
<!-- producer -->
<g id="node4" class="node">
<title>producer</title>
<polygon fill="#e6fff2" stroke="#2f855a" points="602,-91 525,-91 525,-87 521,-87 521,-83 525,-83 525,-61 521,-61 521,-57 525,-57 525,-53 602,-53 602,-91"/>
<polyline fill="none" stroke="#2f855a" points="525,-87 529,-87 529,-83 525,-83 "/>
<polyline fill="none" stroke="#2f855a" points="525,-61 529,-61 529,-57 525,-57 "/>
<text text-anchor="middle" x="563.5" y="-75.8" font-family="Arial" font-size="14.00">Producer</text>
<text text-anchor="middle" x="563.5" y="-60.8" font-family="Arial" font-size="14.00">(kafka&#45;go)</text>
</g>
<!-- write_limiter&#45;&gt;producer -->
<g id="edge3" class="edge">
<title>write_limiter&#45;&gt;producer</title>
<path fill="none" stroke="#2b6cb0" d="M488.12,-72C496.92,-72 505.91,-72 514.46,-72"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="514.64,-75.5 524.64,-72 514.64,-68.5 514.64,-75.5"/>
</g>
<!-- kafka -->
<g id="node5" class="node">
<title>kafka</title>
<path fill="#fff7e6" stroke="#b7791f" d="M861,-155.48C861,-158.11 839.04,-160.25 812,-160.25 784.96,-160.25 763,-158.11 763,-155.48 763,-155.48 763,-112.52 763,-112.52 763,-109.89 784.96,-107.75 812,-107.75 839.04,-107.75 861,-109.89 861,-112.52 861,-112.52 861,-155.48 861,-155.48"/>
<path fill="none" stroke="#b7791f" d="M861,-155.48C861,-152.84 839.04,-150.7 812,-150.7 784.96,-150.7 763,-152.84 763,-155.48"/>
<text text-anchor="middle" x="812" y="-137.8" font-family="Arial" font-size="14.00">Kafka Cluster</text>
<text text-anchor="middle" x="812" y="-122.8" font-family="Arial" font-size="14.00">(topics)</text>
</g>
<!-- producer&#45;&gt;kafka -->
<g id="edge4" class="edge">
<title>producer&#45;&gt;kafka</title>
<path fill="none" stroke="#2b6cb0" d="M602.24,-85.53C608.15,-87.47 614.22,-89.36 620,-91 664.13,-103.48 714.81,-114.75 752.87,-122.62"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="752.26,-126.07 762.76,-124.65 753.66,-119.21 752.26,-126.07"/>
</g>
<!-- retry -->
<g id="node8" class="node">
<title>retry</title>
<polygon fill="#fffbe6" stroke="#b7791f" points="854,-90 851,-94 830,-94 827,-90 770,-90 770,-54 854,-54 854,-90"/>
<text text-anchor="middle" x="812" y="-68.3" font-family="Arial" font-size="14.00">Retry Topic</text>
</g>
<!-- producer&#45;&gt;retry -->
<g id="edge7" class="edge">
<title>producer&#45;&gt;retry</title>
<path fill="none" stroke="#2b6cb0" stroke-dasharray="5,2" d="M602.21,-72C644.21,-72 712.37,-72 759.32,-72"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="759.59,-75.5 769.59,-72 759.59,-68.5 759.59,-75.5"/>
<text text-anchor="middle" x="682.5" y="-75.8" font-family="Arial" font-size="14.00">on transient failure</text>
</g>
<!-- dead -->
<g id="node9" class="node">
<title>dead</title>
<polygon fill="#fff0f0" stroke="#c53030" points="847.5,-36 770.5,-36 770.5,0 853.5,0 853.5,-30 847.5,-36"/>
<polyline fill="none" stroke="#c53030" points="847.5,-36 847.5,-30 "/>
<polyline fill="none" stroke="#c53030" points="853.5,-30 847.5,-30 "/>
<text text-anchor="middle" x="812" y="-14.3" font-family="Arial" font-size="14.00">Dead&#45;letter</text>
</g>
<!-- producer&#45;&gt;dead -->
<g id="edge8" class="edge">
<title>producer&#45;&gt;dead</title>
<path fill="none" stroke="#c53030" stroke-dasharray="1,5" d="M602.19,-58.26C608.1,-56.35 614.19,-54.52 620,-53 667.01,-40.72 721.62,-31.17 760.38,-25.17"/>
<polygon fill="#c53030" stroke="#c53030" points="761.02,-28.62 770.37,-23.65 759.96,-21.7 761.02,-28.62"/>
<text text-anchor="middle" x="682.5" y="-56.8" font-family="Arial" font-size="14.00">on permanent failure</text>
</g>
<!-- consumer -->
<g id="node6" class="node">
<title>consumer</title>
<polygon fill="#e6f2ff" stroke="#2b6cb0" points="1124,-122 988,-122 988,-118 984,-118 984,-114 988,-114 988,-92 984,-92 984,-88 988,-88 988,-84 1124,-84 1124,-122"/>
<polyline fill="none" stroke="#2b6cb0" points="988,-118 992,-118 992,-114 988,-114 "/>
<polyline fill="none" stroke="#2b6cb0" points="988,-92 992,-92 992,-88 988,-88 "/>
<text text-anchor="middle" x="1056" y="-106.8" font-family="Arial" font-size="14.00">Consumer</text>
<text text-anchor="middle" x="1056" y="-91.8" font-family="Arial" font-size="14.00">(worker pool, batch)</text>
</g>
<!-- kafka&#45;&gt;consumer -->
<g id="edge5" class="edge">
<title>kafka&#45;&gt;consumer</title>
<path fill="none" stroke="#2b6cb0" d="M861.1,-127.84C894.38,-123.58 939.39,-117.81 977.66,-112.91"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="978.27,-116.36 987.75,-111.61 977.38,-109.41 978.27,-116.36"/>
</g>
<!-- db -->
<g id="node7" class="node">
<title>db</title>
<path fill="#f0e6ff" stroke="#2b6cb0" d="M1235,-124.48C1235,-127.11 1218.42,-129.25 1198,-129.25 1177.58,-129.25 1161,-127.11 1161,-124.48 1161,-124.48 1161,-81.52 1161,-81.52 1161,-78.89 1177.58,-76.75 1198,-76.75 1218.42,-76.75 1235,-78.89 1235,-81.52 1235,-81.52 1235,-124.48 1235,-124.48"/>
<path fill="none" stroke="#2b6cb0" d="M1235,-124.48C1235,-121.84 1218.42,-119.7 1198,-119.7 1177.58,-119.7 1161,-121.84 1161,-124.48"/>
<text text-anchor="middle" x="1198" y="-106.8" font-family="Arial" font-size="14.00">Database</text>
<text text-anchor="middle" x="1198" y="-91.8" font-family="Arial" font-size="14.00">(GORM)</text>
</g>
<!-- consumer&#45;&gt;db -->
<g id="edge6" class="edge">
<title>consumer&#45;&gt;db</title>
<path fill="none" stroke="#2b6cb0" d="M1124.13,-103C1133.11,-103 1142.15,-103 1150.67,-103"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="1150.75,-106.5 1160.75,-103 1150.75,-99.5 1150.75,-106.5"/>
</g>
<!-- retry&#45;&gt;consumer -->
<g id="edge9" class="edge">
<title>retry&#45;&gt;consumer</title>
<path fill="none" stroke="#2b6cb0" d="M854.05,-77.26C887.81,-81.58 936.6,-87.83 977.65,-93.09"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="977.27,-96.57 987.64,-94.37 978.16,-89.63 977.27,-96.57"/>
<text text-anchor="middle" x="924.5" y="-96.8" font-family="Arial" font-size="14.00">retry consumer</text>
</g>
</g>
</svg>
